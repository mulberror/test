[{"categories":["Build-Site"],"content":" 1 PrefaceContinuing from the previous section, after roughly completing the setup of the DoIt blog, I deployed the blog using Vercel. Vercel supports a Live mode that allows website owners to make real-time modifications, and any website accessed through Vercel will automatically enter this mode. ","date":"2024-10-27","objectID":"/en/little-problem-in-vercellive-mode/:1:0","series":["My-Blog-Reborn"],"tags":["Vercel","Blog","Cookie"],"title":"DoIt theme encountered loading problems in Vercel Live mode","uri":"/en/little-problem-in-vercellive-mode/#1-preface"},{"categories":["Build-Site"],"content":" 2 Problems Encountered Some JS files failed to load As shown in the image, the animation for loading the blog title on the left and the opening of the search bar on the right require loading JS files, but neither of these components loaded successfully. Moreover, it was even stranger that when accessing the blog through the Vercel deployment link (in the format of xxx.vercel.app), everything loaded correctly, which left me puzzled. I would like to especially thank my good roommate MLAcookie for helping me find a solution. Initially, we thought this might be a CDN caching issue. However, when MLAcookie and another roommate accessed the blog using the same environment, they successfully loaded everything. After checking the requested files, we found that the browser had indeed requested the corresponding JS files. JS files requested locally Thus, we could rule out CDN caching as the problem, and our next target was to identify where the loading process locally was failing. ","date":"2024-10-27","objectID":"/en/little-problem-in-vercellive-mode/:2:0","series":["My-Blog-Reborn"],"tags":["Vercel","Blog","Cookie"],"title":"DoIt theme encountered loading problems in Vercel Live mode","uri":"/en/little-problem-in-vercellive-mode/#2-problems-encountered"},{"categories":["Build-Site"],"content":" 3 Local DebuggingMy roommate and I first compared the requested files and noticed significant differences. After several rounds of comparison and rejecting specific file requests, we found that the extra files were mainly being called by rocket-loader.js, specifically from a request in feedback.js. By inspecting the webpage files in the console, we discovered that the local loading threw an exception in liveload.js. After gradually running through the code, we identified that the error ultimately stemmed from the vercel-live module, leading to a mysterious stack overflow error due to repeated calls in the local stack space. However, due to my lack of knowledge in this area, I couldn’t fully understand the underlying principles. Exception thrown during local rendering Thus, we could roughly determine that the issue was a mysterious problem in Vercel Live mode locally, causing the page to fail to render correctly. ","date":"2024-10-27","objectID":"/en/little-problem-in-vercellive-mode/:3:0","series":["My-Blog-Reborn"],"tags":["Vercel","Blog","Cookie"],"title":"DoIt theme encountered loading problems in Vercel Live mode","uri":"/en/little-problem-in-vercellive-mode/#3-local-debugging"},{"categories":["Build-Site"],"content":" 4 Final ResolutionI switched to a completely new computer and accessed the blog directly instead of through Vercel, and the above issue was resolved. Returning to my original computer, I attempted to log out of Vercel to see if that would solve the problem. Unfortunately, the JS still failed to load, and the Vercel Live comment buttons remained hovering on the page, as I was still accessing the page through that mode. Checking the local cookie situation, I found that even when logged out, the deployed project still recognized and activated Live mode through local cookies. Deployed project activates Vercel Live mode through local cookies However, I found it impossible to directly block the use of this cookie to resolve the issue; the theme still failed to load due to the thrown exception. Directly blocking the cookie leads to errors The dark-light toggle part of the theme needs to read data from the cookie. Directly blocking the cookie causes the check in line 16 of the code to fail, leading to errors because it cannot read localStorage. ","date":"2024-10-27","objectID":"/en/little-problem-in-vercellive-mode/:4:0","series":["My-Blog-Reborn"],"tags":["Vercel","Blog","Cookie"],"title":"DoIt theme encountered loading problems in Vercel Live mode","uri":"/en/little-problem-in-vercellive-mode/#4-final-resolution"},{"categories":["Build-Site"],"content":" 5 SolutionIf you encounter this problem, you can resolve it by deleting the cookies for this site. This method needs to be implemented each time you access the blog through Vercel, which, while not problematic, is quite cumbersome. Delete the cookies for this site Vercel’s functionality is already robust and stable, so once you import your project from GitHub, you can typically proceed without needing to interact with Vercel further. If you want to avoid this cumbersome method, I recommend accessing the blog directly through its domain instead of going through Vercel. OvO ","date":"2024-10-27","objectID":"/en/little-problem-in-vercellive-mode/:5:0","series":["My-Blog-Reborn"],"tags":["Vercel","Blog","Cookie"],"title":"DoIt theme encountered loading problems in Vercel Live mode","uri":"/en/little-problem-in-vercellive-mode/#5-solution"},{"categories":null,"content":" Blog Timeline This about-page is written by human. ","date":"2024-10-24","objectID":"/en/about/:0:0","series":null,"tags":null,"title":"About","uri":"/en/about/#"},{"categories":["Build-Site"],"content":" Tip This post is an experimental post of testing the related config of English web. I just use DeepL and Chat-GPT translate my post from Chinese to English. I apologize if it gave you a bad reading experience. ","date":"2024-10-22","objectID":"/en/rebuild-my-blog/:0:0","series":["My-Blog-Reborn"],"tags":["hugo","vercel","Blog"],"title":"Reborn Blog by Hugo, Vercel and Cloudflare","uri":"/en/rebuild-my-blog/#"},{"categories":["Build-Site"],"content":" 1 PrefaceI’ve once built a blog with the Hugo framework before, using the theme PaperMod. But since most of the posts was lost, and I happened to come across ryan4yin ’s blog, I learned about the DoIt theme made by HEIGE-PCloud. The DoIt theme is very much in line with the style of blog I envisioned at the beginning, so it took me a while to rebuild my personal blog straight away, and in the meantime I also spent a little bit of time learning a little bit of front-end knowledge from scratch, and briefly wrote a humble personal homepage My Little World. ","date":"2024-10-22","objectID":"/en/rebuild-my-blog/:1:0","series":["My-Blog-Reborn"],"tags":["hugo","vercel","Blog"],"title":"Reborn Blog by Hugo, Vercel and Cloudflare","uri":"/en/rebuild-my-blog/#1-preface"},{"categories":["Build-Site"],"content":" 2 Version Information Hugo: v0.136.4 DoIt: 0.4.X ","date":"2024-10-22","objectID":"/en/rebuild-my-blog/:2:0","series":["My-Blog-Reborn"],"tags":["hugo","vercel","Blog"],"title":"Reborn Blog by Hugo, Vercel and Cloudflare","uri":"/en/rebuild-my-blog/#2-version-information"},{"categories":["Build-Site"],"content":" 2 Hugo + Gitpage","date":"2024-10-22","objectID":"/en/rebuild-my-blog/:3:0","series":["My-Blog-Reborn"],"tags":["hugo","vercel","Blog"],"title":"Reborn Blog by Hugo, Vercel and Cloudflare","uri":"/en/rebuild-my-blog/#2-hugo--gitpage"},{"categories":["Build-Site"],"content":" 2.1 Local ConfigurationThis part should be quite familiar to every Hugo user, so I will briefly record it here. First, install Go and Hugo, and configure it according to the official documentation Hugo Document. After installing the dependencies, you can proceed with the local blog configuration. I chose the DoIt theme and directly referred to the documentation written by the author Theme Documentation - Basic Concepts. However, since the author’s documentation is applicable to DoIt version 0.2.X, I encountered a few issues while writing this article, which was also when I configured my blog. ","date":"2024-10-22","objectID":"/en/rebuild-my-blog/:3:1","series":["My-Blog-Reborn"],"tags":["hugo","vercel","Blog"],"title":"Reborn Blog by Hugo, Vercel and Cloudflare","uri":"/en/rebuild-my-blog/#21-local-configuration"},{"categories":["Build-Site"],"content":" 2.2 Deploying GitpageThis part mainly follows the configuration tutorial in the Hugo official documentation Host on GitHub Pages. I previously tried configuring three themes. If I simply pushed the static resources generated by hugo server in the \\public directory directly to the GitHub repository, the rendered static pages would have various issues. Therefore, I adopted the deployment method from the official documentation. According to the official configuration method, you generally only need to pay attention to replacing the branch information in .github/workflows/hugo.yaml and the Hugo version information in HUGO_VERSION with your corresponding values. ","date":"2024-10-22","objectID":"/en/rebuild-my-blog/:3:2","series":["My-Blog-Reborn"],"tags":["hugo","vercel","Blog"],"title":"Reborn Blog by Hugo, Vercel and Cloudflare","uri":"/en/rebuild-my-blog/#22-deploying-gitpage"},{"categories":["Build-Site"],"content":" 3 VercelVercel’s functionality to sync and deploy projects from GitHub is very convenient. After pushing local resources to the GitHub repository, Vercel will directly sync the resources, and the deployment speed is very fast. Log in to Vercel with your GitHub account or register a Vercel account and link it to your GitHub account. Then click Add New... to import the blog deployed to Gitpage from the GitHub repository. Importing the corresponding GitHub project in Vercel Choosing the Hugo framework After importing, the project in Vercel is connected to the selected GitHub repository. As long as you commit once locally, the project in Vercel will be redeployed. And each hosted project is given a separate url to connect to, so that it is easy to resolve your own domain name. ","date":"2024-10-22","objectID":"/en/rebuild-my-blog/:4:0","series":["My-Blog-Reborn"],"tags":["hugo","vercel","Blog"],"title":"Reborn Blog by Hugo, Vercel and Cloudflare","uri":"/en/rebuild-my-blog/#3-vercel"},{"categories":["Build-Site"],"content":" 4 SummaryI was going to write a paragraph on how to configure Cloudflare, but it’s actually quite magical, thanks to my roommate. But it was quite a magical process, thanks to my roommate. I’m going to write about this experience and some of the problems I encountered in configuring the blog in a separate post. Translated with DeepL.com (free version) ","date":"2024-10-22","objectID":"/en/rebuild-my-blog/:5:0","series":["My-Blog-Reborn"],"tags":["hugo","vercel","Blog"],"title":"Reborn Blog by Hugo, Vercel and Cloudflare","uri":"/en/rebuild-my-blog/#4-summary"}]