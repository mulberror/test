[{"categories":["建站"],"content":" 1 前言书接上文，在大致完成了主题 DoIt 博客的搭建后，我将博客通过 Vercel 进行了部署。 Vercel 是支持通过 Vercel Live 的模式帮助网站持有者来实时进行一些修改的，并且通过 Vercel 进入到的自己的网站，都默认会进入到该模式中。 ","date":"2024-10-27","objectID":"/little-problem-in-vercellive-mode/:1:0","series":["小站重生记"],"tags":["Vercel","博客","Cookie"],"title":"DoIt 主题在 Vercel Live 模式下遇到的加载问题","uri":"/little-problem-in-vercellive-mode/#1-前言"},{"categories":["建站"],"content":" 2 遇见的问题 部分 js 文件未能加载成功 如上图所示，左侧加载博客标题的动画和右侧搜索栏的打开都需要加载 js 文件，但是这两个部分都没有进行加载。 而且更加奇怪的是，我通过 Vercel 部署的连接，也就是那个 xxx.vercel.app 格式的连接进入，就发现是可以正常加载的，这让我感到非常的疑惑。 这里需要特别感谢我的好室友 MLAcookie，帮助我一起找到解决方法。 一开始我们觉得这个是 cdn 缓存的问题，但是在 MLAcookie 和另外一个室友的电脑上用相同的环境进行访问后，发现他们都加载成功了。后来查看了请求到的文件，发现浏览器已经请求到了对应的 js 文件。 本地已请求到打印动画的 js 文件 所以就基本排除是 cdn 缓存的问题，我们将下一个目标锁定在本地加载的过程中出现异常。 ","date":"2024-10-27","objectID":"/little-problem-in-vercellive-mode/:2:0","series":["小站重生记"],"tags":["Vercel","博客","Cookie"],"title":"DoIt 主题在 Vercel Live 模式下遇到的加载问题","uri":"/little-problem-in-vercellive-mode/#2-遇见的问题"},{"categories":["建站"],"content":" 3 本地调试我和室友那首先对比了一下请求到的文件，发现两边请求到的文件有较大的差异，经过多次比对和拒绝某些特定文件的请求后发现，这些多出来的文件主要是来自 rocket-loader.js 调用的 feedback.js 这个文件中的请求。 在控制台给请求到的网页文件打了端点，本地的加载在 liveload.js 这个地方抛出了异常。经过逐步运行确定该错误最终来自 vercel-live 模块的调用，为一个神秘的反复调用本地栈空间导致的爆栈错误，不过由于对该方面的知识欠缺，所以更加原理的问题并没有理解。 本地渲染时抛出的异常 所以大致可以确定问题就是 Vercel Live 模式本地出现了一些神秘的问题，导致最后页面没有正确地渲染出来。 ","date":"2024-10-27","objectID":"/little-problem-in-vercellive-mode/:3:0","series":["小站重生记"],"tags":["Vercel","博客","Cookie"],"title":"DoIt 主题在 Vercel Live 模式下遇到的加载问题","uri":"/little-problem-in-vercellive-mode/#3-本地调试"},{"categories":["建站"],"content":" 4 最终解决我换了一台全新的电脑，并没有从 Vercel 进入到部署的博客中，而是进行直连，上述问题就不存在了。 回到我一开始的电脑，我尝试退出 Vercel 能不能一样解决问题。不过不幸的是 js 加载依旧未成功，页面中悬停着 Vercel Live 的评论相关按键，我还是通过该模式进行页面的访问。 查看了本地 Cookie 情况，可以发现在退出登录的情况下，部署的项目还是通过本地的 Cookie 识别并启动了 Live 模式。 部署项目通过本地 Cookie 启动 Vercel Live 模式 不过经过尝试，无法直接通过阻止使用该 Cookie 来解决问题，主题依旧会因为抛出异常而停止加载。 直接阻止 Cookie 导致错误 以上主题亮暗色调节的部分需要读取 Cookie 的数据，如果直接阻止 Cookie 会导致上图代码中的第 16 行判断 localStorage 存在，但是因为无法读取而导致了错误。 ","date":"2024-10-27","objectID":"/little-problem-in-vercellive-mode/:4:0","series":["小站重生记"],"tags":["Vercel","博客","Cookie"],"title":"DoIt 主题在 Vercel Live 模式下遇到的加载问题","uri":"/little-problem-in-vercellive-mode/#4-最终解决"},{"categories":["建站"],"content":" 5 解决方案如果你也遇到了该问题，可以通过删除本网站的的 Cookie 解决，这个方法在每一次通过 Vercel 访问博客的时候都需要实施一次，虽然不会造成什么问题但显得非常的麻烦。 删除本网站的 Cookie Vercel 本身的功能已经足够强大并且稳定了，所以第一次从 github 导入项目后就可以直接不用管 Vercel 了。 不想用这么麻烦的方法的话，我还是建议不要通过 Vercel 进入，直接用域名进入罢 OvO。 ","date":"2024-10-27","objectID":"/little-problem-in-vercellive-mode/:5:0","series":["小站重生记"],"tags":["Vercel","博客","Cookie"],"title":"DoIt 主题在 Vercel Live 模式下遇到的加载问题","uri":"/little-problem-in-vercellive-mode/#5-解决方案"},{"categories":null,"content":" [!TIP] 本站的文章可能会有中文版或者英文版两个版本，可以按照需求进行选择。 不过疏于本人英语水平有限，所以一部分文章会采用 DeepL 或者其他翻译工具的帮助，以及我会标注出个人书写的英文版文章。 如果非中文文章中有语法错误或者更加好的书写方式，方便在文章的评论区进行留言:)。 ","date":"2024-10-24","objectID":"/about/:0:0","series":null,"tags":null,"title":"关于","uri":"/about/#"},{"categories":["建站"],"content":" 1 前言我之前也是用 Hugo 框架搭建的博客，使用的主题是 PaperMod。 不过因为大部分存货都丢失了，再加上碰巧见看到了 ryan4yin 大佬的博客，从而了解到了 HEIGE-PCloud 大佬制作的 DoIt 主题。 DoIt 主题非常符合我一开始预想的博客样式，所以就直接花了一段时间进行了个人博客的重建，并且在这个期间还花了一点时间从零学了点前端知识，简单地写了一个简陋的个人主页 My Little World。 ","date":"2024-10-22","objectID":"/rebuild-my-blog/:1:0","series":["小站重生记"],"tags":["hugo","vercel","博客"],"title":"用 Hugo + Vercel 重建博客","uri":"/rebuild-my-blog/#1-前言"},{"categories":["建站"],"content":" 2 相关版本信息 Hugo: v0.136.4 DoIt: 0.4.X ","date":"2024-10-22","objectID":"/rebuild-my-blog/:2:0","series":["小站重生记"],"tags":["hugo","vercel","博客"],"title":"用 Hugo + Vercel 重建博客","uri":"/rebuild-my-blog/#2-相关版本信息"},{"categories":["建站"],"content":" 2 Hugo + Gitpage","date":"2024-10-22","objectID":"/rebuild-my-blog/:3:0","series":["小站重生记"],"tags":["hugo","vercel","博客"],"title":"用 Hugo + Vercel 重建博客","uri":"/rebuild-my-blog/#2-hugo--gitpage"},{"categories":["建站"],"content":" 2.1 本地配置这个部分对于每个 Hugo 用户应该都比较熟练，在这里简单记录一下。 首先就是安装 Go 和 Hugo，根据官方文档配置即可 Hugo Document。 安装好依赖后，就可以进行本地博客相关的配置了。 我选择的是 DoIt 主题，直接就参考了作者编写的文档 主题文档 - 基本概念。 不过因为作者的文档适用 DoIt 0.2.X 的版本，所以在写这篇文章的时候，也就是我配置博客时还是遇到少许问题。 ","date":"2024-10-22","objectID":"/rebuild-my-blog/:3:1","series":["小站重生记"],"tags":["hugo","vercel","博客"],"title":"用 Hugo + Vercel 重建博客","uri":"/rebuild-my-blog/#21-本地配置"},{"categories":["建站"],"content":" 2.2 部署 Gitpage这部分主要依据 Hugo 官方文档中的配置教程 Host on GitHub Pages。 我之前尝试了三个主题的配置，如果单纯的将 hugo server 生成的 \\public 静态资源直接推到 github 仓库中，最后渲染出来的静态页面多少渲染都会出问题，因此还是采取官方文档的部署方法。 根据官方配置的方法，一般只需要注意将 .github/workflows/hugo.yaml 中的 branch 信息以及 HUGO_VERSION 中的 Hugo 版本信息替换成自己对应的即可。 ","date":"2024-10-22","objectID":"/rebuild-my-blog/:3:2","series":["小站重生记"],"tags":["hugo","vercel","博客"],"title":"用 Hugo + Vercel 重建博客","uri":"/rebuild-my-blog/#22-部署-gitpage"},{"categories":["建站"],"content":" 3 VercelVercel 从 github 中同步并部署项目的功能十分方便。 在本地资源 push 到 github 仓库后，Vercel 会直接同步资源并且部署的速度非常快。 使用 github 账号登录 Vercel 或者注册 Vercel 账号再关联自己的 github 账号，然后点击 Add New... 从 github 仓库中导入部署到 Gitpage 的博客。 Vercel 中导入对应 github 项目 选择 Hugo 框架 导入后，Vercel 中的项目和选择的 github 仓库就连接在一起了，只要本地 commit 一次，Vercel 中的项目也会重新部署一次。 并且每一个托管的项目都会给一个独立的 url 连接，这样方便自己的域名解析。 ","date":"2024-10-22","objectID":"/rebuild-my-blog/:4:0","series":["小站重生记"],"tags":["hugo","vercel","博客"],"title":"用 Hugo + Vercel 重建博客","uri":"/rebuild-my-blog/#3-vercel"},{"categories":["建站"],"content":" 4 小结本来是打算写一段配置 Cloudflare 的过程的。但是这段过程其实挺魔幻的，还多亏了我的室友。 这一段经历以及在配置博客的过程中遇到的一些问题打算还是另起文章来记录 OvO。 ","date":"2024-10-22","objectID":"/rebuild-my-blog/:5:0","series":["小站重生记"],"tags":["hugo","vercel","博客"],"title":"用 Hugo + Vercel 重建博客","uri":"/rebuild-my-blog/#4-小结"}]